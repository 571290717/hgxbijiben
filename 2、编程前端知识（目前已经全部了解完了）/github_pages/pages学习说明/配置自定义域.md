# 配置自定义域

# 关于自定义域名和 GitHub 页面

## 本文内容

- 支持的自定义域
- 对您的 GitHub Pages 网站使用子域名
- 对您的 GitHub Pages 网站使用 apex 域
- 保护 GitHub Pages 网站的自定义域
- 延伸阅读

GitHub Pages 支持使用自定义域名，或者将网站的 URL 根目录从默认值（如 `octocat.github.io`）更改为你拥有的任何域名。

GitHub Pages 适用于具有 GitHub Free 和组织的 GitHub Free 的公共仓库，以及具有 GitHub Pro、GitHub Team、GitHub Enterprise Cloud 和 GitHub Enterprise Server 的公共和私有仓库。 有关详细信息，请参阅“[GitHub 的产品](https://docs.github.com/zh/get-started/learning-about-github/githubs-products)”。

## [支持的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#supported-custom-domains)

GitHub Pages 可使用两种类型的域名：子域名和 apex 域名。 有关不支持的自定义域的列表，请参阅“[自定义域和 GitHub Pages 疑难解答](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#custom-domain-names-that-are-unsupported)”。

| 支持的自定义域类型 | 示例               |
| :----------------- | :----------------- |
| `www` 子域         | `www.example.com`  |
| 自定义子域         | `blog.example.com` |
| Apex 域            | `example.com`      |

可以为站点设置顶点和/或 `www` 子域配置。 有关 apex 域的详细信息，请参阅“[对 GitHub Pages 站点使用顶点域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#using-an-apex-domain-for-your-github-pages-site)”。

建议始终使用 `www` 子域，即使同时使用顶点域也是如此。 当你使用顶点域创建新网站时，我们会自动尝试保护 `www` 子域，以便在提供你的站点内容时使用，但你需要进行 DNS 更改才能使用 `www` 子域。 如果你配置 `www` 子域，我们会自动尝试保护相关的顶点域。 有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)”。

在配置用户或组织站点的自定义域后，自定义域将替换未配置自定义域的帐户所拥有的任何项目站点 URL 的 `<user>.github.io` 或 `<organization>.github.io` 部分。 例如，如果你的用户站点的自定义域为 `www.octocat.com`，并且你拥有一个未配置自定义域且从名为 `octo-project` 的存储库发布的项目站点，则该存储库的 GitHub Pages 站点将在 `www.octocat.com/octo-project` 上提供。 有关每种类型的站点和处理自定义域的详细信息，请参阅“[关于 GitHub Pages](https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages#types-of-github-pages-sites)”。

## [对您的 GitHub Pages 网站使用子域名](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#对您的-github-pages-网站使用子域名)

子域名是根域前 URL 的一部分。 你可以将子域配置为 `www` 或站点的独特部分，如 `blog.example.com`。

DNS 提供商为子域配置 `CNAME` 记录。 有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain)”。

### [`www` 子域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#www-subdomains)

`www` 子域是最常用的子域类型。 例如，`www.example.com` 包括 `www` 子域。

`www` 子域是最稳定的自定义域类型，因为 `www` 子域不受 GitHub 服务器的 IP 地址变动的影响。

### [自定义子域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#custom-subdomains)

自定义子域是一种不使用标准 `www` 变体的子域。 自定义子域主要在您需要将网站分为两个不同的部分时使用。 例如，可以创建一个名为 `blog.example.com` 的站点并独立于 `www.example.com` 自定义该部分。

## [对您的 GitHub Pages 网站使用 apex 域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#对您的-github-pages-网站使用-apex-域)

顶点域是不包含子域的自定义域，如 `example.com`。 Apex 域也称为基础域、裸域、根 apex 域或区域 apex 域。

DNS 提供商为顶点域配置 `A`、`ALIAS` 或 `ANAME` 记录。 有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain)”。

如果使用 apex 域作为自定义域名，建议还设置一个 `www` 子域。 如果通过 DNS 提供程序配置每种域类型的正确记录，GitHub Pages 将自动在域之间创建重定向。 例如，如果将 `www.example.com` 配置为站点的自定义域，并且为顶点和 `www` 域设置了 GitHub Pages DNS 记录，则 `example.com` 将重定向到 `www.example.com`。 请注意，自动重定向仅适用于 `www` 子域。 自动重定向不适用于任何其他子域，如 `blog`。有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain)”。

## [保护 GitHub Pages 网站的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#保护-github-pages-网站的自定义域)

如果 GitHub Pages 站点已禁用，但设置了自定义域，则存在域接管的风险。 在您的网站被禁用时拥有通过 DNS 提供商配置的自定义域，可能会导致其他人在您的一个子域上托管网站。

验证自定义域可防止其他 GitHub 用户将你的域用于他们的存储库。 如果你的域未经过验证，并且 GitHub Pages 站点已禁用，则应立即通过 DNS 提供商更新或删除 DNS 记录。有关详细信息，请参阅“[验证 GitHub Pages 的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages)”和“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)”。

有许多原因会导致您的网站被自动禁用。

- 如果您从 GitHub Pro 降级到 GitHub Free，则目前发布自您的帐户中私有仓库的任何 GitHub Pages 站点都会取消发布。 有关详细信息，请参阅“[降级 GitHub 订阅](https://docs.github.com/zh/billing/managing-billing-for-your-github-account/downgrading-your-github-subscription)”。
- 如果将私人仓库转让给使用 GitHub Free 的个人帐户，仓库将失去对 GitHub Pages 功能的访问，当前发布的 GitHub Pages 站点将取消发布。 有关详细信息，请参阅“[转让仓库](https://docs.github.com/zh/repositories/creating-and-managing-repositories/transferring-a-repository)”。

## [延伸阅读](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#further-reading)

- "[自定义域和 GitHub Pages 疑难解答](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages)"



# 管理 GitHub Pages 站点的自定义域

## 本文内容

- 关于自定义域配置
- 配置子域
- 配置 apex 域
- 配置顶点域和 www 子域变体
- 删除自定义域
- 保护自定义域
- 延伸阅读

您可以设置或更新某些 DNS 记录和仓库设置，以将 GitHub Pages 站点的默认域指向自定义域。

[Mac](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site?platform=mac)[Windows](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site?platform=windows)[Linux](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site?platform=linux)

GitHub Pages 适用于具有 GitHub Free 和组织的 GitHub Free 的公共仓库，以及具有 GitHub Pro、GitHub Team、GitHub Enterprise Cloud 和 GitHub Enterprise Server 的公共和私有仓库。 有关详细信息，请参阅“[GitHub 的产品](https://docs.github.com/zh/get-started/learning-about-github/githubs-products)”。

拥有仓库管理员权限的人可为 GitHub Pages 站点配置自定义域。

## [关于自定义域配置](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#about-custom-domain-configuration)

使用 DNS 提供程序配置自定义域之前，请确保将自定义域添加到您的 GitHub Pages 站点。 使用 DNS 提供程序配置自定义域而不将其添加到 GitHub，可能导致其他人能够在您的某个子域上托管站点。

`dig` 命令可用于验证 DNS 记录的配置是否正确，它未包含在 Windows 中。 必须安装 [BIND](https://www.isc.org/bind/) 才能验证 DNS 记录是否配置正确。

注意：传播 DNS 更改可能需要长达 24 小时的时间。

## [配置子域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain)

要设置 `www` 或自定义子域（例如 `www.example.com` 或 `blog.example.com`），必须在存储库设置中添加你的域。 然后，通过 DNS 提供商配置 CNAME 记录。

1. 在 GitHub 上，导航到站点的仓库。 1. 在存储库名称下，单击 “设置”。 如果看不到“设置”选项卡，请选择 下拉菜单，然后单击“设置” 。

   ![存储库标头的屏幕截图，其中显示了选项卡。 “设置”选项卡以深橙色边框突出显示。](https://docs.github.com/assets/cb-28266/images/help/repository/repo-actions-settings.png)

2. 在边栏的“代码和自动化”部分，单击“ 页面”。

3. 在“自定义域”下，键入自定义域，然后单击“保存”。 如果从分支发布站点，将会创建一个提交，将 `CNAME` 文件添加到源分支的根目录。 如果使用自定义 GitHub Actions 工作流发布站点，则不会创建 `CNAME` 文件。 有关发布源的详细信息，请参阅“[配置 GitHub Pages 站点的发布源](https://docs.github.com/zh/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site)”。

   注意：如果自定义域是国际化域名，则必须输入 Punycode 编码版本。

   有关 Punycodes 的详细信息，请参阅[国际化域名](https://en.wikipedia.org/wiki/Internationalized_domain_name)。

4. 导航到 DNS 提供程序并创建 `CNAME` 记录，使子域指向站点的默认域。 例如，如果要使用子域 `www.example.com` 作为你的用户站点，请创建将 `www.example.com` 指向 `<user>.github.io` 的 `CNAME` 记录。 如果要使用子域 `another.example.com` 作为你的组织站点，请创建将 `another.example.com` 指向 `<organization>.github.io` 的 `CNAME` 记录。 `CNAME` 记录应始终指向 `<user>.github.io` 或 `<organization>.github.io`，排除存储库名称。 有关如何创建正确记录的更多信息，请参阅 DNS 提供程序的文档。 有关站点的默认域的详细信息，请参阅“[关于 GitHub Pages](https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages#types-of-github-pages-sites)”。

   警告：我们强烈建议勿使用通配符 DNS 记录，例如 `*.example.com`。 即使验证域，这些记录也会立即面临域接管风险。 例如，如果验证 `example.com`，这会阻止某人使用 `a.example.com`，但他们仍可以接管 `b.a.example.com`（由通配符 DNS 记录所涵盖）。 有关详细信息，请参阅“[验证 GitHub Pages 的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages)”。

   \1. 打开

   Git Bash

   。

5. 要确认 DNS 记录配置正确，请使用 `dig` 命令，将 WWW.EXAMPLE.COM 替换为子域。

   ```shell
   $ dig WWW.EXAMPLE.COM +nostats +nocomments +nocmd
       > ;WWW.EXAMPLE.COM.                    IN      A
       > WWW.EXAMPLE.COM.             3592    IN      CNAME   YOUR-USERNAME.github.io.
       > YOUR-USERNAME.github.io.      43192   IN      CNAME   GITHUB-PAGES-SERVER .
       > GITHUB-PAGES-SERVER .         22      IN      A       192.0.2.1
   ```

6. 如果你使用静态站点生成器在本地构建站点并将生成的文件推送到 GitHub，请将添加 CNAME 文件的提交拉取到本地存储库。 有关详细信息，请参阅“[自定义域和 GitHub Pages 疑难解答](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#cname-errors)”。 1. （可选）若要为站点强制实施 HTTPS 加密，请选择“强制实施 HTTPS”。 可能要过 24 小时才能使用此选项。 有关详细信息，请参阅“[使用 HTTPS 保护 GitHub Pages 站点](https://docs.github.com/zh/pages/getting-started-with-github-pages/securing-your-github-pages-site-with-https)”。

## [配置 apex 域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain)

要设置顶点域（例如 `example.com`），必须在存储库设置中配置自定义域，并使用 DNS 提供程序配置至少一个 `ALIAS`、`ANAME` 或 `A` 记录。

如果使用 apex 域作为自定义域名，建议还设置一个 `www` 子域。 如果通过 DNS 提供程序配置每种域类型的正确记录，GitHub Pages 将自动在域之间创建重定向。 例如，如果将 `www.example.com` 配置为站点的自定义域，并且为顶点和 `www` 域设置了 GitHub Pages DNS 记录，则 `example.com` 将重定向到 `www.example.com`。 请注意，自动重定向仅适用于 `www` 子域。 自动重定向不适用于任何其他子域，如 `blog`。 有关详细信息，请参阅“[配置子域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain)”。

1. 在 GitHub 上，导航到站点的仓库。 1. 在存储库名称下，单击 “设置”。 如果看不到“设置”选项卡，请选择 下拉菜单，然后单击“设置” 。

   ![存储库标头的屏幕截图，其中显示了选项卡。 “设置”选项卡以深橙色边框突出显示。](https://docs.github.com/assets/cb-28266/images/help/repository/repo-actions-settings.png)

2. 在边栏的“代码和自动化”部分，单击“ 页面”。

3. 在“自定义域”下，键入自定义域，然后单击“保存”。 如果从分支发布站点，将会创建一个提交，将 `CNAME` 文件添加到源分支的根目录。 如果使用自定义 GitHub Actions 工作流发布站点，则不会创建 `CNAME` 文件。 有关发布源的详细信息，请参阅“[配置 GitHub Pages 站点的发布源](https://docs.github.com/zh/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site)”。

4. 导航到 DNS 提供程序并创建一条 `ALIAS`、`ANAME` 或 `A` 记录。 还可以为 IPv6 支持创建 `AAAA` 记录。 如果要实现 IPv6 支持，我们强烈建议在 `AAAA` 记录之外使用 `A` 记录，因为 IPv6 的全局采用速度缓慢。 有关如何创建正确记录的更多信息，请参阅 DNS 提供程序的文档。

   - 要创建 `ALIAS` 或 `ANAME` 记录，请将顶点域指向站点的默认域。 有关站点的默认域的详细信息，请参阅“[关于 GitHub Pages](https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages#types-of-github-pages-sites)”。

   - 要创建

      

     ```
     A
     ```

      

     记录，请将顶点域指向 GitHub Pages 的 IP 地址。

     ```shell
     185.199.108.153
     185.199.109.153
     185.199.110.153
     185.199.111.153
     ```

   - 要创建

      

     ```
     AAAA
     ```

      

     记录，请将顶点域指向 GitHub Pages 的 IP 地址。

     ```shell
     2606:50c0:8000::153
     2606:50c0:8001::153
     2606:50c0:8002::153
     2606:50c0:8003::153
     ```

   警告：我们强烈建议勿使用通配符 DNS 记录，例如 `*.example.com`。 即使验证域，这些记录也会立即面临域接管风险。 例如，如果验证 `example.com`，这会阻止某人使用 `a.example.com`，但他们仍可以接管 `b.a.example.com`（由通配符 DNS 记录所涵盖）。 有关详细信息，请参阅“[验证 GitHub Pages 的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages)”。

   \1. 打开

   Git Bash

   。

5. 要确认 DNS 记录配置正确，请使用 `dig` 命令，将 EXAMPLE.COM 替换为顶点域。 确认结果与上面 GitHub Pages 的 IP 地址相匹配。

   - 适用于 `A` 记录：

     ```shell
     $ dig EXAMPLE.COM +noall +answer -t A
     > EXAMPLE.COM    3600    IN A     185.199.108.153
     > EXAMPLE.COM    3600    IN A     185.199.109.153
     > EXAMPLE.COM    3600    IN A     185.199.110.153
     > EXAMPLE.COM    3600    IN A     185.199.111.153
     ```

   - 适用于 `AAAA` 记录：

     ```shell
     $ dig EXAMPLE.COM +noall +answer -t AAAA
     > EXAMPLE.COM     3600    IN AAAA     2606:50c0:8000::153
     > EXAMPLE.COM     3600    IN AAAA     2606:50c0:8001::153
     > EXAMPLE.COM     3600    IN AAAA     2606:50c0:8002::153
     > EXAMPLE.COM     3600    IN AAAA     2606:50c0:8003::153
     ```

     请记住还要检查 `A` 记录。

6. 如果你使用静态站点生成器在本地构建站点并将生成的文件推送到 GitHub，请将添加 CNAME 文件的提交拉取到本地存储库。 有关详细信息，请参阅“[自定义域和 GitHub Pages 疑难解答](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#cname-errors)”。 1. （可选）若要为站点强制实施 HTTPS 加密，请选择“强制实施 HTTPS”。 可能要过 24 小时才能使用此选项。 有关详细信息，请参阅“[使用 HTTPS 保护 GitHub Pages 站点](https://docs.github.com/zh/pages/getting-started-with-github-pages/securing-your-github-pages-site-with-https)”。

## [配置顶点域和 `www` 子域变体](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain-and-the-www-subdomain-variant)

使用顶点域时，建议配置 GitHub Pages 站点，以便在顶点域和该域的 `www` 子域变体中托管内容。

要与顶点域一起设置 `www` 子域，必须先使用 DNS 提供程序创建 `ALIAS`、`ANAME` 或 `A` 记录来配置顶点域。 有关详细信息，请参阅[配置顶点域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain)。

配置 apex 域后，您必须通过 DNS 提供商配置 CNAME 记录。

1. 导航到 DNS 提供程序并创建 `CNAME` 记录，使其将 `www.example.com` 指向站点 `<user>.github.io` 或 `<organization>.github.io` 的默认域。 不要包括仓库名称。 有关如何创建正确记录的更多信息，请参阅 DNS 提供程序的文档。 有关站点的默认域的详细信息，请参阅“[关于 GitHub Pages](https://docs.github.com/zh/pages/getting-started-with-github-pages/about-github-pages#types-of-github-pages-sites)”。

2. 要确认 DNS 记录配置正确，请使用

    

   ```
   dig
   ```

    

   命令，将

    

   ```
   www
   ```

    

   替换为子域变体。

   ```shell
   $ dig WWW.EXAMPLE.COM +nostats +nocomments +nocmd
       > ;WWW.EXAMPLE.COM                     IN      A
       > WWW.EXAMPLE.COM.              3592    IN      CNAME   YOUR-USERNAME.github.io.
       > YOUR-USERNAME.github.io.      43192   IN      CNAME   GITHUB-PAGES-SERVER.
       > GITHUB-PAGES-SERVER.         22      IN      A       192.0.2.1
   ```

## [删除自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#removing-a-custom-domain)

1. 在 GitHub 上，导航到站点的仓库。 1. 在存储库名称下，单击 “设置”。 如果看不到“设置”选项卡，请选择 下拉菜单，然后单击“设置” 。

   ![存储库标头的屏幕截图，其中显示了选项卡。 “设置”选项卡以深橙色边框突出显示。](https://docs.github.com/assets/cb-28266/images/help/repository/repo-actions-settings.png)

2. 在边栏的“代码和自动化”部分，单击“ 页面”。

3. 在“自定义域”下，单击“删除”。![用于保存或删除 GitHub Pages 上的自定义域的设置框的屏幕截图。 在显示“example.com”的文本框右侧有一个红色类型的标记为“删除”的按钮。](https://docs.github.com/assets/cb-54204/images/help/pages/remove-custom-domain.png)

## [保护自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#securing-your-custom-domain)

如果 GitHub Pages 站点已禁用，但设置了自定义域，则存在域接管的风险。 在您的网站被禁用时拥有通过 DNS 提供商配置的自定义域，可能会导致其他人在您的一个子域上托管网站。

验证自定义域可防止其他 GitHub 用户将你的域用于他们的存储库。 如果你的域未经过验证，并且 GitHub Pages 站点已禁用，则应立即通过 DNS 提供商更新或删除 DNS 记录。 有关详细信息，请参阅“[验证 GitHub Pages 的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages)”。

## [延伸阅读](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#further-reading)

- "[自定义域和 GitHub Pages 疑难解答](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages)"

# 验证 GitHub Pages 的自定义域

## 本文内容

- 关于 GitHub Pages 的域验证
- 验证用户站点的域
- 验证组织站点的域

您可以通过验证您的域来提高自定义域的安全性并避免接管攻击。

GitHub Pages 适用于具有 GitHub Free 和组织的 GitHub Free 的公共仓库，以及具有 GitHub Pro、GitHub Team、GitHub Enterprise Cloud 和 GitHub Enterprise Server 的公共和私有仓库。 有关详细信息，请参阅“[GitHub 的产品](https://docs.github.com/zh/get-started/learning-about-github/githubs-products)”。

## [关于 GitHub Pages 的域验证](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages#about-domain-verification-for-github-pages)

验证个人帐户或组织的自定义域时，只能使用个人帐户或组织拥有的存储库将 GitHub Pages 站点发布到已验证的自定义域或域的直接子域。

验证您的域会阻止其他 GitHub 用户接管您的自定义域并使用它来发布他们自己的 GitHub Pages 站点。 当您删除存储库、降低计费计划级别时，或者在取消链接自定义域或禁用 GitHub Pages 而域仍配置为 GitHub Pages 且未进行验证的任何其他更改之后，可能会发生域接管。

验证域时，验证中还会包含任何直接子域。 例如，如果已验证 `github.com` 自定义域，`docs.github.com`、`support.github.com` 和任何其他直接子域也将受到保护，以防止被接管。

警告：我们强烈建议勿使用通配符 DNS 记录，例如 `*.example.com`。 即使验证域，这些记录也会立即面临域接管风险。 例如，如果验证 `example.com`，这会阻止某人使用 `a.example.com`，但他们仍可以接管 `b.a.example.com`（由通配符 DNS 记录所涵盖）。 有关详细信息，请参阅“[验证 GitHub Pages 的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages)”。

还可以验证组织的域，这会在组织 配置文件。 有关详细信息，请参阅“[验证或批准您组织的域](https://docs.github.com/zh/organizations/managing-organization-settings/verifying-or-approving-a-domain-for-your-organization)”。

## [验证用户站点的域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages#verifying-a-domain-for-your-user-site)

1. 在任何页面的右上角，单击个人资料照片，然后单击“设置”。

   ![GitHub 帐户菜单的屏幕截图，其中显示了供用户查看和编辑其个人资料、内容和设置的选项。 菜单项“设置”用深橙色框出。](https://docs.github.com/assets/cb-65929/images/help/settings/userbar-account-settings.png)

2. 在边栏的“代码、规划和自动化”部分中，单击 页。

3. 在右侧，单击“添加域”。

4. 在“要添加什么域？”下，输入要验证的域，然后选择“添加域”。![用于在 GitHub Pages 上添加已验证域的文本框的屏幕截图，其中填充了“example.com”。 文本下方是一个标有“添加域”的绿色按钮。](https://docs.github.com/assets/cb-14564/images/help/pages/verify-enter-domain.png)

5. 按照“添加 DNS TXT 记录”下的说明，使用域托管服务创建 TXT 记录。![用于将 TXT 记录添加到 example.com 的 DNS 配置的 GitHub Pages 说明的屏幕截图。](https://docs.github.com/assets/cb-168509/images/help/pages/verify-dns.png)

6. 等待您的 DNS 配置更改，这可能是立即更改或最多需要 24 小时。 可以通过在命令行上运行 `dig` 命令来确认对 DNS 配置的更改。 在以下命令中，将 `USERNAME` 替换为你的用户名，将 `example.com` 替换为要验证的域。 如果您的 DNS 配置已更新，您应该会在输出中看到新的 TXT 记录。

   ```
   dig _github-pages-challenge-USERNAME.example.com +nostats +nocomments +nocmd TXT
   ```

7. 确认 DNS 配置已更新后，可以验证域。 如果更改不是立即进行的，并且你已离开上一页，请按照最初的几个步骤返回“页面”设置，在域右侧单击 ，然后单击“继续验证”。![显示已验证域的 GitHub Pages 设置的屏幕截图。 在右侧的水平烤肉串图标下，“继续验证”下拉列表选项用深橙色框出。](https://docs.github.com/assets/cb-35980/images/help/pages/verify-continue.png)

8. 若要验证该域，请单击“验证”。

9. 若要确保自定义域保持验证状态，请将 TXT 记录保留在域的 DNS 配置中。

## [验证组织站点的域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages#verifying-a-domain-for-your-organization-site)

组织所有者可以验证其组织的自定义域。

1. 在 GitHub.com 的右上角，单击你的个人资料照片，然后单击“你的组织”。

   ![@octocat 的个人资料图片下的下拉菜单的屏幕截图。 “你的组织”以深橙色标出。](https://docs.github.com/assets/cb-24939/images/help/profile/your-organizations.png)2. 在组织旁边，单击“设置”。

   ![“octo-org”组织的屏幕截图，其中用深橙色边框突出显示了“设置”按钮。](https://docs.github.com/assets/cb-5718/images/help/organizations/settings-button.png)

2. 在边栏的“代码、规划和自动化”部分中，单击 页。

3. 在右侧，单击“添加域”。

4. 在“要添加什么域？”下，输入要验证的域，然后选择“添加域”。![用于在 GitHub Pages 上添加已验证域的文本框的屏幕截图，其中填充了“example.com”。 文本下方是一个标有“添加域”的绿色按钮。](https://docs.github.com/assets/cb-14564/images/help/pages/verify-enter-domain.png)

5. 按照“添加 DNS TXT 记录”下的说明，使用域托管服务创建 TXT 记录。![用于将 TXT 记录添加到 example.com 的 DNS 配置的 GitHub Pages 说明的屏幕截图。](https://docs.github.com/assets/cb-168509/images/help/pages/verify-dns.png)

6. 等待 DNS 配置更改。 这可能是立即更改或最多需要 24 小时。 可以通过在命令行上运行 `dig` 命令来确认对 DNS 配置的更改。 在以下命令中，将 `ORGANIZATION` 替换为组织的名称，将 `example.com` 替换为要验证的域。 如果您的 DNS 配置已更新，您应该会在输出中看到新的 TXT 记录。

   ```
   dig _github-pages-challenge-ORGANIZATION.example.com +nostats +nocomments +nocmd TXT
   ```

7. 确认 DNS 配置已更新后，可以验证域。 如果更改不是立即进行的，并且你已离开上一页，请按照最初的几个步骤返回“页面”设置，在域右侧单击 ，然后单击“继续验证”。![显示已验证域的 GitHub Pages 设置的屏幕截图。 在右侧的水平烤肉串图标下，“继续验证”下拉列表选项用深橙色框出。](https://docs.github.com/assets/cb-35980/images/help/pages/verify-continue.png)

8. 若要验证该域，请单击“验证”。

9. 若要确保自定义域保持验证状态，请将 TXT 记录保留在域的 DNS 配置中。







# 自定义域和 GitHub Pages 疑难解答

## 本文内容

- CNAME 错误
- DNS 配置错误
- 自定义域名不受支持
- HTTPS 错误
- Linux 上的 URL 格式
- 浏览器缓存

您可以检查常见错误，以解决与 GitHub Pages 站点的自定义域或 HTTPS 相关的问题。

GitHub Pages 适用于具有 GitHub Free 和组织的 GitHub Free 的公共仓库，以及具有 GitHub Pro、GitHub Team、GitHub Enterprise Cloud 和 GitHub Enterprise Server 的公共和私有仓库。 有关详细信息，请参阅“[GitHub 的产品](https://docs.github.com/zh/get-started/learning-about-github/githubs-products)”。

## [CNAME 错误](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#cname-errors)

如果从自定义 GitHub Actions 工作流进行发布，则忽略且无需任何 CNAME 文件。

如果从分支进行发布，自定义域存储在发布源根目录下的 CNAME 文件中。 您可以通过仓库设置或手动添加或更新此文件。 有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)”。

要让站点呈现在正确的域中，请确保 CNAME 文件仍存在于存储库中。 例如，许多静态站点生成器会强制推送到存储库，这可能会覆盖在配置自定义域时添加到存储库的 CNAME 文件。 如果在本地构建站点并将生成的文件推送到 GitHub，请确保先将添加 CNAME 文件的提交拉取到本地存储库，使该文件包含在构建中。

然后，请确保 CNAME 文件的格式正确。

- CNAME 文件名必须全部大写。
- CNAME 文件只能包含一个域。 要将多个域指向您的站点，必须通过 DNS 提供程序设置重定向。
- CNAME 文件必须仅包含域名。 例如，`www.example.com`、`blog.example.com` 或 `example.com`。
- 域名在所有 GitHub Pages 站点中必须是唯一的。 例如，如果另一个存储库的 CNAME 文件包含 `example.com`，则不能在存储库的 CNAME 文件中使用 `example.com` 。

## [DNS 配置错误](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#dns-misconfiguration)

如果将站点的默认域指向自定义域时遇到问题，请联系 DNS 提供商。

您还可以使用以下方法之一来测试自定义域的 DNS 记录是否正确配置：

- CLI 工具，例如 `dig`。 有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)”。
- 在线 DNS 查找工具。

## [自定义域名不受支持](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#custom-domain-names-that-are-unsupported)

如果您的自定义域不受支持，则可能需要将您的域更改为受支持的域。 也可以联系您的 DNS 提供商，看他们是否提供域名转发服务。

确保您的站点没有：

- 使用多个 apex 域。 例如，`example.com` 和 `anotherexample.com`。

- 使用多个 `www` 子域。 例如，`www.example.com` 和 `www.anotherexample.com`。

- 同时使用 apex 域和自定义子域。 例如，`example.com` 和 `docs.example.com`。

  一个例外是 `www` 子域。 如果配置正确， `www` 子域将自动重定向到 apex 域。 有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-an-apex-domain)”。

警告：我们强烈建议勿使用通配符 DNS 记录，例如 `*.example.com`。 即使验证域，这些记录也会立即面临域接管风险。 例如，如果验证 `example.com`，这会阻止某人使用 `a.example.com`，但他们仍可以接管 `b.a.example.com`（由通配符 DNS 记录所涵盖）。 有关详细信息，请参阅“[验证 GitHub Pages 的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/verifying-your-custom-domain-for-github-pages)”。

有关支持的自定义域的列表，请参阅“[关于自定义域名和 GitHub 页面](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/about-custom-domains-and-github-pages#supported-custom-domains)”。

## [HTTPS 错误](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#https-errors)

可以通过 HTTPS 访问使用正确配置了 `CNAME`、`ALIAS`、`ANAME` 或 `A` DNS 记录的自定义域的 GitHub Pages 站点。 有关详细信息，请参阅“[使用 HTTPS 保护 GitHub Pages 站点](https://docs.github.com/zh/pages/getting-started-with-github-pages/securing-your-github-pages-site-with-https)”。

配置自定义域后，您的站点可能需要最多一个小时才能通过 HTTPS 访问。 更新现有 DNS 设置后，您可能需要删除自定义域并将其重新添加到站点仓库，以触发启用 HTTPS 的进程。 有关详细信息，请参阅“[管理 GitHub Pages 站点的自定义域](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)”。

如果使用的是证书颁发机构授权 (CAA) 记录，则必须存在至少一个值为 `letsencrypt.org` 的 CAA 记录，才能通过 HTTPS 访问站点。 有关详细信息，请参阅 Let's Encrypt 文档中的“[证书颁发机构授权 (CAA)](https://letsencrypt.org/docs/caa/)”。

## [Linux 上的 URL 格式](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#url-formatting-on-linux)

如果您站点的 URL 包含以破折号开头或结尾的用户名或组织名称，或者包含连续破折号，则使用 Linux 浏览的用户在尝试访问您的站点时会收到服务器错误。 要解决此问题，请更改您的 GitHub 用户名以删除非字母数字字符。 有关详细信息，请参阅“[更改 GitHub 用户名](https://docs.github.com/zh/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-personal-account-settings/changing-your-github-username)”。

## [浏览器缓存](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#browser-cache)

如果您最近更改或删除了自定义域，但无法在浏览器中访问新 URL，则可能需要清除浏览器的缓存才能访问新 URL。 有关清除缓存的更多信息，请参阅浏览器的文档。





